<div>
    <div class="d-flex justify-content-around">
        <div>
            <input type="text" [(ngModel)]="searchTerm" placeholder="Search task name" />
            <select [(ngModel)]="selectedTag">
                <option value="">All Tags</option>
                <option value="study">Study</option>
                <option value="work">Work</option>
                <option value="entertainment">Entertainment</option>
            </select>
            <select [(ngModel)]="deadlineFilter">
                <option value="all">All</option>
                <option value="passed">Passed Deadlines</option>
                <option value="available">Available Deadlines</option>
            </select>
        </div>
        <div>
            <span *ngIf="checkedCount == 1; else notOne">{{ checkedCount }} item selected </span>
            <button class="btn btn-outline-success me-3" [disabled]="!isAnyChecked" (click)="markAsCompleted()">Mark as
                completed</button>
            <button class="btn btn-outline-warning me-3" [disabled]="!isAnyChecked" (click)="markAsIncomplete()">Mark as
                incomplete</button>
            <button (click)="deleteMultiple()" type="button" class="btn btn-danger"
                [disabled]="!isAnyChecked">Delete</button>
        </div>
        <ng-template #notOne>
            {{ checkedCount }} items selected
        </ng-template>
    </div>

    <table class="table table-striped table-bordered align-middle">
        <thead>
            <tr>
                <th>
                    <input type="checkbox" [(ngModel)]="checkboxAll" (ngModelChange)="checkAll()">
                </th>
                <th>Task Name</th>
                <th>Description</th>
                <th>Deadline</th>
                <th>Tag</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let task of filteredTasks">
                <td>
                    <input type="checkbox" id="task.id" (change)="toggleCheck(task.id)" [ngModel]="task.isChecked">
                </td>
                <td [ngClass]="task.isDone? 'completed' : ''">{{ task.name }}</td>
                <td>{{ task.description }}</td>
                <td [ngClass]="isDeadlinePassed(task.deadline) ? 'passed' : ''">{{ task.deadline | date:'dd/MM/yyyy
                    HH:mm' }}
                </td>
                <td>{{ task.tag }}</td>
                <td>
                    <button (click)="toggleText(task.id)" type="button"
                        [ngClass]="task.isDone? 'btn btn-success' : 'btn btn-warning'">
                        {{ task.isDone ? 'Completed' : 'Due to finish' }} </button>
                </td>
                <td class="text-center">
                    <button [routerLink]="['/edit', task.id]" type="button"
                        class="btn btn-outline-primary">Edit</button>
                </td>
            </tr>
    </table>

    <div class="btn align-middle me-3">
        <button type="button" class="btn btn-secondary me-3" routerLink="/add">Add Task</button>
        <button type="button" class="btn btn-secondary" [disabled]="!isAnyChecked" (click)="exportToExcel()">Export to
            Excel</button>
        <label class="file-upload">
            <input type="file" (change)="addFile($event)" accept=".xlsx, .xls" />
            Upload Excel File
        </label>
    </div>

</div>